<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ZARC Studio</title>
    <link rel="icon" href="data:," />
    <script type="module" src="/src/main.ts"></script>
  </head>
  <body>
    <div class="orb orb-a"></div>
    <div class="orb orb-b"></div>
    <div class="app">
      <header class="hero fade-up">
        <p class="eyebrow">Rust + Tauri • Cross Platform</p>
        <h1>ZARC Studio</h1>
        <p class="subtitle">高性能压缩解压、实时进度、快速等级推荐与加密保护</p>
      </header>

      <main class="grid">
        <section class="card fade-up" style="--delay: 80ms">
          <h2>压缩</h2>
          <p class="hint">支持文件/目录压缩，提供可选加密（XChaCha20-Poly1305）。</p>

          <div class="inline-actions">
            <button id="pickCompressFile" type="button">选择文件</button>
            <button id="pickCompressDirectory" type="button">选择目录</button>
            <span id="compressKindTag" class="tag">当前: 文件</span>
          </div>

          <label for="compressSource">源路径</label>
          <input id="compressSource" readonly placeholder="请选择待压缩源" />

          <label for="compressOutput">输出路径 (可选)</label>
          <div class="row">
            <input id="compressOutput" placeholder="留空自动生成" />
            <button id="pickCompressOutput" class="ghost" type="button">保存到...</button>
          </div>

          <label for="compressLevel">压缩等级: <span id="compressLevelLabel">8</span></label>
          <input id="compressLevel" type="range" min="1" max="22" value="8" />

          <label class="checkbox">
            <input id="includeRootDir" type="checkbox" checked />
            <span>目录压缩时包含根目录</span>
          </label>

          <label class="checkbox">
            <input id="compressEncrypt" type="checkbox" />
            <span>启用加密 (输出 `.enc`)</span>
          </label>

          <label for="compressPassword">加密密码</label>
          <input id="compressPassword" type="password" placeholder="启用加密后必填" disabled />

          <button id="compressSubmit" class="primary" type="button">开始压缩</button>

          <div class="progress-panel">
            <div class="progress-meta">
              <span id="compressProgressText">等待任务开始</span>
              <span id="compressProgressPercent">0%</span>
            </div>
            <div class="progress-track"><div id="compressProgressBar" class="progress-fill"></div></div>
            <small id="compressProgressStats">-</small>
          </div>

          <pre id="compressResult" class="result"></pre>
        </section>

        <section class="card fade-up" style="--delay: 140ms">
          <h2>解压</h2>
          <p class="hint">自动识别 `.zst/.tar.zst` 及 `.enc` 加密版本。</p>

          <label for="decompressSource">归档文件</label>
          <div class="row">
            <input id="decompressSource" readonly placeholder="请选择归档文件" />
            <button id="pickDecompressSource" class="ghost" type="button">选择文件</button>
          </div>

          <label for="decompressOutput">输出路径 (可选)</label>
          <div class="row">
            <input id="decompressOutput" placeholder="留空自动推断" />
            <button id="pickDecompressOutput" class="ghost" type="button">选择位置</button>
          </div>

          <label for="decompressPassword">解密密码 (加密包必填)</label>
          <input id="decompressPassword" type="password" placeholder="仅加密归档需要输入" />

          <button id="decompressSubmit" class="primary" type="button">开始解压</button>

          <div class="progress-panel">
            <div class="progress-meta">
              <span id="decompressProgressText">等待任务开始</span>
              <span id="decompressProgressPercent">0%</span>
            </div>
            <div class="progress-track"><div id="decompressProgressBar" class="progress-fill"></div></div>
            <small id="decompressProgressStats">-</small>
          </div>

          <pre id="decompressResult" class="result"></pre>
        </section>

        <section class="card benchmark fade-up" style="--delay: 200ms">
          <h2>快速压缩性能测试</h2>
          <p class="hint">快速比较多个压缩等级，自动给出平衡吞吐与压缩率的推荐等级。</p>

          <div class="inline-actions">
            <button id="pickBenchmarkFile" type="button">选择文件</button>
            <button id="pickBenchmarkDirectory" type="button">选择目录</button>
            <span id="benchmarkKindTag" class="tag">当前: 文件</span>
          </div>

          <label for="benchmarkSource">测试源路径</label>
          <input id="benchmarkSource" readonly placeholder="请选择用于快速测试的源文件/目录" />

          <div class="two-col">
            <div>
              <label for="benchmarkMinLevel">最小等级</label>
              <input id="benchmarkMinLevel" type="number" min="1" max="22" value="1" />
            </div>
            <div>
              <label for="benchmarkMaxLevel">最大等级</label>
              <input id="benchmarkMaxLevel" type="number" min="1" max="22" value="12" />
            </div>
          </div>

          <div class="two-col">
            <div>
              <label for="benchmarkIterations">每等级轮数</label>
              <input id="benchmarkIterations" type="number" min="1" max="12" value="2" />
            </div>
            <div>
              <label for="benchmarkSampleSize">样本大小 (MiB)</label>
              <input id="benchmarkSampleSize" type="number" min="4" max="1024" value="64" />
            </div>
          </div>

          <button id="benchmarkSubmit" class="primary" type="button">开始快速测试</button>

          <div id="benchmarkSummary" class="summary"></div>
          <div id="benchmarkBars" class="bars"></div>
        </section>
      </main>

      <footer class="status-wrap fade-up" style="--delay: 260ms">
        <p id="status" class="status">就绪</p>
      </footer>
    </div>
  </body>
</html>
