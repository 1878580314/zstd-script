# Zstandard 智能工具箱

![版本](https://img.shields.io/badge/version-v2.3--Rich-blue.svg)
![Python 版本](https://img.shields.io/badge/python-3.7+-brightgreen.svg)
![依赖](https://img.shields.io/badge/dependencies-rich%2C%20zstandard-orange.svg)
![许可证](https://img.shields.io/badge/license-MIT-green.svg)

一个功能强大、界面友好的 Zstandard 压缩工具，基于 Python 和 [Rich](https://github.com/Textualize/rich) 库构建，提供了美观的交互式终端界面。

---

## 📖 项目简介

本工具旨在为强大的 [Zstandard](https://facebook.github.io/zstd/) 压缩算法提供一个简单易用的命令行界面（TUI）。无论您是想快速压缩文件夹、解压文件，还是评估不同压缩级别下的性能，本工具箱都能通过清晰的菜单和可视化的进度条，让操作变得直观而高效。

## ✨ 功能特性

- ✅ **智能压缩**：自动识别文件和文件夹。压缩文件夹时，会智能地先打包成 `.tar` 再进行压缩，生成 `.tar.zst` 归档。
- ✅ **交互式终端界面**：基于 Rich 库，提供美观的菜单、进度条、表格和高亮提示，告别枯燥的命令行。
- ✅ **全能工具集**：
  - **压缩**：支持自定义压缩级别（1-22），并利用所有 CPU 核心进行多线程压缩。
  - **解压**：智能解压 `.zst` 文件和 `.tar.zst` 归档。
  - **测试**：校验 `.zst` 压缩文件的完整性，确保数据无损。
  - **查看信息**：无需完全解压，即可快速查看压缩文件的元数据（如压缩率、原始/压缩大小）。
  - **性能基准测试**：对真实文件进行基准测试，直观展示不同压缩级别下的速度与压缩率。
- ✅ **拖拽支持**：在大多数现代终端中，您可以直接将文件或文件夹拖拽到窗口中以输入路径。
- ✅ **单文件脚本**：所有功能集成在一个 Python 脚本中，易于分发和使用。

## 📸 界面预览

**主菜单:**

```
 Zstandard 智能工具箱 (v2.3-Rich)

 这是一个完全独立的工具，内置 Zstandard 引擎
 操作提示: 可直接将文件/文件夹拖拽到窗口输入路径

 1. 压缩文件或文件夹
 2. 解压文件或归档
 3. 测试压缩文件
 4. 查看压缩文件信息
 5. 真实文件压缩性能测试
 6. 退出

────────────────────────────────────────────────────────
 请输入您的选择:
```

**压缩进度:**

```
 压缩中   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  100.0% • 500.5/500.5 MB • 250.2 MB/s • 0:00:00
```

**性能测试结果:**

```
                      Zstandard 压缩性能
┏━━━━━━━┳━━━━━━━━━━┳━━━━━━━━━━┳━━━━━━━━━━━━━━━━┓
┃ 级别  ┃ 压缩率   ┃ 压缩后   ┃ 压缩速度       ┃
┡━━━━━━━╇━━━━━━━━━━╇━━━━━━━━━━╇━━━━━━━━━━━━━━━━┩
│ 1     │ 35.50%   │ 177.7 MB │ 650.1 MB/s     │
│ 2     │ 33.80%   │ 169.2 MB │ 580.3 MB/s     │
│ 3     │ 31.25%   │ 156.5 MB │ 490.7 MB/s     │
│ ...   │ ...      │ ...      │ ...            │
└───────┴──────────┴──────────┴────────────────┘
```

## 🚀 快速开始

### 1. 环境要求

- Python 3.7+
- `pip` 包管理器

### 2. 安装依赖

在终端中运行以下命令，安装所需的库：

```bash
pip install rich zstandard
```

### 3. 运行工具

将代码保存为 `zstd_toolbox.py`（或任何你喜欢的名字），然后通过以下命令启动：

```bash
python zstd_toolbox.py
```

程序启动后，您将看到主菜单。根据提示输入数字选择相应功能即可。

## 🛠️ 功能详解

1.  **压缩文件或文件夹**

    - 输入文件或文件夹路径。
    - 输入压缩级别（1-22，默认为 3）。级别越高，压缩率越高，但速度越慢。
    - 程序将开始压缩，并显示实时进度。

2.  **解压文件或归档**

    - 输入 `.zst` 或 `.tar.zst` 文件的路径。
    - 程序会自动判断类型并解压到当前目录。

3.  **测试压缩文件**

    - 输入一个 `.zst` 或 `.tar.zst` 文件。
    - 工具会尝试解压数据流来检查文件是否损坏，但不会将解压后的数据写入磁盘。

4.  **查看压缩文件信息**

    - 输入一个 `.zst` 文件。
    - 工具会快速读取文件头信息，并以表格形式展示压缩后大小、原始大小和压缩率等。

5.  **真实文件压缩性能测试**
    - 输入一个较大的文件作为测试样本。
    - 工具会依次使用 1 到 19 级压缩级别对其进行压缩，并测量每个级别的速度和压缩率，帮助您在速度和大小之间做出最佳权衡。

## 📄 许可证

本项目采用 [MIT License](LICENSE) 授权。
